import{_ as o,c as a,o as t,ag as l}from"./chunks/framework.Cycwnjj0.js";const b=JSON.parse('{"title":"@sqlrooms/notebook","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://sqlrooms.org/api/notebook/"}]]},"headers":[],"relativePath":"api/notebook/index.md","filePath":"api/notebook/index.md"}'),i={name:"api/notebook/index.md"};function s(n,e,r,d,c,h){return t(),a("div",null,[...e[0]||(e[0]=[l(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /api/notebook.md for this page in Markdown format</div><h1 id="sqlrooms-notebook" tabindex="-1">@sqlrooms/notebook <a class="header-anchor" href="#sqlrooms-notebook" aria-label="Permalink to &quot;@sqlrooms/notebook&quot;">​</a></h1><h1 id="sqlrooms-notebook-1" tabindex="-1">@sqlrooms/notebook <a class="header-anchor" href="#sqlrooms-notebook-1" aria-label="Permalink to &quot;@sqlrooms/notebook&quot;">​</a></h1><p>Tabbed notebook UI and Zustand slice for SQL/text/markdown/vega/input cells in SQLRooms apps.</p><ul><li>NotebookSlice stores tabs and cells under <code>config.notebook</code></li><li>SQL cells create DuckDB views in schema <code>notebook</code> using the cell name</li><li>Cell execution cascades to dependents when definitions change</li><li>Pluggable cell renderers supported via <code>createNotebookSlice()</code></li></ul><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sqlrooms/notebook</span></span></code></pre></div><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h2><h3 id="config" tabindex="-1">Config <a class="header-anchor" href="#config" aria-label="Permalink to &quot;Config&quot;">​</a></h3><ul><li><code>createDefaultNotebookConfig(partial?)</code> → default <code>config.notebook</code></li><li>Zod schemas: <code>NotebookSliceConfig</code>, <code>NotebookCellSchema</code>, <code>NotebookTabSchema</code></li></ul><h3 id="slice" tabindex="-1">Slice <a class="header-anchor" href="#slice" aria-label="Permalink to &quot;Slice&quot;">​</a></h3><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createNotebookSlice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({});</span></span></code></pre></div><p>Requires a store that also includes <code>@sqlrooms/duckdb</code> slice for <code>db.sqlSelectToJson</code> and <code>db.getConnector</code>.</p><p>Notebook actions under <code>notebook</code>:</p><ul><li><code>addTab()</code>, <code>renameTab(id, title)</code>, <code>setCurrentTab(id)</code>, <code>removeTab(id)</code></li><li><code>addCell(tabId, type)</code>, <code>removeCell(cellId)</code>, <code>renameCell(cellId, name)</code>, <code>updateCell(cellId, updater)</code></li><li><code>runCell(cellId, opts?)</code>, <code>runAllCells(tabId)</code>, <code>cancelRunCell(cellId)</code></li></ul><p>SQL cells must contain a single <code>SELECT</code> statement. Validation is performed via <code>get().db.sqlSelectToJson(lastQueryStatement)</code>. Successful execution creates or replaces a DuckDB view in schema <code>notebook</code> named after the cell.</p><p>Dependencies are inferred from <code>sqlSelectToJson</code> and basic name references; when a cell runs, dependent SQL cells are re-run unless <code>cascade</code> is disabled.</p><h3 id="ui" tabindex="-1">UI <a class="header-anchor" href="#ui" aria-label="Permalink to &quot;UI&quot;">​</a></h3><p><code>createNotebookComponents(useStore)</code> returns <code>{ Notebook }</code> React component bound to your store hook.</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Notebook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createNotebookComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(useRoomStore);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Notebook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;;</span></span></code></pre></div><p>Tabs use <code>EditableText</code> for renaming, with a + Add button. SQL, Text, Markdown, Vega (stub), and Input cells are supported out of the box.</p><h2 id="stable-vs-internal-imports" tabindex="-1">Stable vs internal imports <a class="header-anchor" href="#stable-vs-internal-imports" aria-label="Permalink to &quot;Stable vs internal imports&quot;">​</a></h2><p>Use root imports from <code>@sqlrooms/notebook</code> as the stable API surface.</p><ul><li>stable: <code>createNotebookSlice</code>, <code>createDefaultNotebookConfig</code>, <code>Notebook</code>, <code>useStoreWithNotebook</code>, exported schema types</li><li>internal: direct imports from implementation files under <code>src/</code> are not semver-stable and may change without notice</li></ul><h2 id="type-aliases" tabindex="-1">Type Aliases <a class="header-anchor" href="#type-aliases" aria-label="Permalink to &quot;Type Aliases&quot;">​</a></h2><ul><li><a href="./type-aliases/InputTypes.html">InputTypes</a></li><li><a href="./type-aliases/NotebookSliceState.html">NotebookSliceState</a></li><li><a href="./type-aliases/InputCell.html">InputCell</a></li><li><a href="./type-aliases/NotebookCell.html">NotebookCell</a></li><li><a href="./type-aliases/NotebookSheetMeta.html">NotebookSheetMeta</a></li><li><a href="./type-aliases/NotebookSheet.html">NotebookSheet</a></li><li><a href="./type-aliases/NotebookSliceConfig.html">NotebookSliceConfig</a></li><li><a href="./type-aliases/NotebookTab.html">NotebookTab</a></li></ul><h2 id="variables" tabindex="-1">Variables <a class="header-anchor" href="#variables" aria-label="Permalink to &quot;Variables&quot;">​</a></h2><ul><li><a href="./variables/InputTypes.html">InputTypes</a></li><li><a href="./variables/Notebook.html">Notebook</a></li><li><a href="./variables/InputCell.html">InputCell</a></li><li><a href="./variables/NotebookCell.html">NotebookCell</a></li><li><a href="./variables/NotebookSheetMeta.html">NotebookSheetMeta</a></li><li><a href="./variables/NotebookSheet.html">NotebookSheet</a></li><li><a href="./variables/NotebookSliceConfig.html">NotebookSliceConfig</a></li><li><a href="./variables/NotebookTab.html">NotebookTab</a></li></ul><h2 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to &quot;Functions&quot;">​</a></h2><ul><li><a href="./functions/createDefaultNotebookConfig.html">createDefaultNotebookConfig</a></li><li><a href="./functions/createNotebookSlice.html">createNotebookSlice</a></li><li><a href="./functions/useStoreWithNotebook.html">useStoreWithNotebook</a></li></ul>`,30)])])}const k=o(i,[["render",s]]);export{b as __pageData,k as default};
