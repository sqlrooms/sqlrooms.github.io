import{_ as t,c as o,o as r,ag as a}from"./chunks/framework.Cycwnjj0.js";const p=JSON.parse('{"title":"Class: Coordinator","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://sqlrooms.org/api/mosaic/mosaic/namespaces/vg/classes/Coordinator.html"}]]},"headers":[],"relativePath":"api/mosaic/mosaic/namespaces/vg/classes/Coordinator.md","filePath":"api/mosaic/mosaic/namespaces/vg/classes/Coordinator.md"}'),d={name:"api/mosaic/mosaic/namespaces/vg/classes/Coordinator.md"};function c(n,e,s,i,l,h){return r(),o("div",null,[...e[0]||(e[0]=[a('<p><a href="./../../../../">@sqlrooms/mosaic</a> / <a href="./../">vg</a> / Coordinator</p><h1 id="class-coordinator" tabindex="-1">Class: Coordinator <a class="header-anchor" href="#class-coordinator" aria-label="Permalink to &quot;Class: Coordinator&quot;">​</a></h1><p>A Mosaic Coordinator manages all database communication for clients and handles selection updates. The Coordinator also performs optimizations including query caching, consolidation, and pre-aggregation.</p><h2 id="constructors" tabindex="-1">Constructors <a class="header-anchor" href="#constructors" aria-label="Permalink to &quot;Constructors&quot;">​</a></h2><h3 id="constructor" tabindex="-1">Constructor <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;Constructor&quot;">​</a></h3><blockquote><p><strong>new Coordinator</strong>(<code>db?</code>, <code>options?</code>): <code>Coordinator</code></p></blockquote><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>db?</code></td><td><code>Connector</code></td><td>Database connector. Defaults to a web socket connection.</td></tr><tr><td><code>options?</code></td><td>{ <code>logger?</code>: <code>Logger</code> | <code>null</code>; <code>manager?</code>: <code>QueryManager</code>; <code>cache?</code>: <code>boolean</code>; <code>consolidate?</code>: <code>boolean</code>; <code>preagg?</code>: <code>PreAggregateOptions</code>; }</td><td>Coordinator options.</td></tr><tr><td><code>options.logger?</code></td><td><code>Logger</code> | <code>null</code></td><td>The logger to use, defaults to <code>console</code>.</td></tr><tr><td><code>options.manager?</code></td><td><code>QueryManager</code></td><td>The query manager to use.</td></tr><tr><td><code>options.cache?</code></td><td><code>boolean</code></td><td>Boolean flag to enable/disable query caching.</td></tr><tr><td><code>options.consolidate?</code></td><td><code>boolean</code></td><td>Boolean flag to enable/disable query consolidation.</td></tr><tr><td><code>options.preagg?</code></td><td><code>PreAggregateOptions</code></td><td>Options for the Pre-aggregator.</td></tr></tbody></table><h4 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Coordinator</code></p><h2 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" aria-label="Permalink to &quot;Properties&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Property</th><th>Modifier</th><th>Type</th></tr></thead><tbody><tr><td><a id="manager"></a> <code>manager</code></td><td><code>public</code></td><td><code>QueryManager</code></td></tr><tr><td><a id="preaggregator"></a> <code>preaggregator</code></td><td><code>public</code></td><td><code>PreAggregator</code></td></tr><tr><td><a id="clients"></a> <code>clients</code></td><td><code>public</code></td><td><code>Set</code>&lt;<a href="./MosaicClient.html"><code>MosaicClient</code></a>&gt;</td></tr><tr><td><a id="filtergroups"></a> <code>filterGroups</code></td><td><code>public</code></td><td><code>Map</code>&lt;<a href="./../../../../classes/Selection.html"><code>Selection</code></a>, <code>FilterGroupEntry</code>&gt;</td></tr><tr><td><a id="_logger"></a> <code>_logger</code></td><td><code>protected</code></td><td><code>Logger</code></td></tr></tbody></table><h2 id="methods" tabindex="-1">Methods <a class="header-anchor" href="#methods" aria-label="Permalink to &quot;Methods&quot;">​</a></h2><h3 id="clear" tabindex="-1">clear() <a class="header-anchor" href="#clear" aria-label="Permalink to &quot;clear()&quot;">​</a></h3><blockquote><p><strong>clear</strong>(<code>options?</code>): <code>void</code></p></blockquote><p>Clear the coordinator state.</p><h4 id="parameters-1" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-1" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>options?</code></td><td>{ <code>clients?</code>: <code>boolean</code>; <code>cache?</code>: <code>boolean</code>; }</td><td>Options object.</td></tr><tr><td><code>options.clients?</code></td><td><code>boolean</code></td><td>If true, disconnect all clients.</td></tr><tr><td><code>options.cache?</code></td><td><code>boolean</code></td><td>If true, clear the query cache.</td></tr></tbody></table><h4 id="returns-1" tabindex="-1">Returns <a class="header-anchor" href="#returns-1" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><hr><h3 id="databaseconnector" tabindex="-1">databaseConnector() <a class="header-anchor" href="#databaseconnector" aria-label="Permalink to &quot;databaseConnector()&quot;">​</a></h3><h4 id="call-signature" tabindex="-1">Call Signature <a class="header-anchor" href="#call-signature" aria-label="Permalink to &quot;Call Signature&quot;">​</a></h4><blockquote><p><strong>databaseConnector</strong>(): <code>Connector</code> | <code>null</code></p></blockquote><p>Get or set the database connector.</p><h5 id="returns-2" tabindex="-1">Returns <a class="header-anchor" href="#returns-2" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>Connector</code> | <code>null</code></p><p>The current database connector.</p><h4 id="call-signature-1" tabindex="-1">Call Signature <a class="header-anchor" href="#call-signature-1" aria-label="Permalink to &quot;Call Signature&quot;">​</a></h4><blockquote><p><strong>databaseConnector</strong>(<code>db</code>): <code>Connector</code></p></blockquote><p>Get or set the database connector.</p><h5 id="parameters-2" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-2" aria-label="Permalink to &quot;Parameters&quot;">​</a></h5><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>db</code></td><td><code>Connector</code></td><td>The database connector to use.</td></tr></tbody></table><h5 id="returns-3" tabindex="-1">Returns <a class="header-anchor" href="#returns-3" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>Connector</code></p><p>The current database connector.</p><hr><h3 id="logger" tabindex="-1">logger() <a class="header-anchor" href="#logger" aria-label="Permalink to &quot;logger()&quot;">​</a></h3><blockquote><p><strong>logger</strong>(<code>logger?</code>): <code>Logger</code></p></blockquote><p>Get or set the logger.</p><h4 id="parameters-3" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-3" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>logger?</code></td><td><code>Logger</code> | <code>null</code></td><td>The logger to use.</td></tr></tbody></table><h4 id="returns-4" tabindex="-1">Returns <a class="header-anchor" href="#returns-4" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Logger</code></p><p>The current logger</p><hr><h3 id="cancel" tabindex="-1">cancel() <a class="header-anchor" href="#cancel" aria-label="Permalink to &quot;cancel()&quot;">​</a></h3><blockquote><p><strong>cancel</strong>(<code>requests</code>): <code>void</code></p></blockquote><p>Cancel previously submitted query requests. These queries will be canceled if they are queued but have not yet been submitted.</p><h4 id="parameters-4" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-4" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>requests</code></td><td><code>QueryResult</code>&lt;<code>unknown</code>&gt;[]</td><td>An array of query result objects, such as those returned by the <code>query</code> method.</td></tr></tbody></table><h4 id="returns-5" tabindex="-1">Returns <a class="header-anchor" href="#returns-5" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><hr><h3 id="exec" tabindex="-1">exec() <a class="header-anchor" href="#exec" aria-label="Permalink to &quot;exec()&quot;">​</a></h3><blockquote><p><strong>exec</strong>(<code>query</code>, <code>options?</code>): <code>QueryResult</code></p></blockquote><p>Issue a query for which no result (return value) is needed.</p><h4 id="parameters-5" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-5" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td><code>MaybeArray</code>&lt;<code>QueryType</code>&gt;</td><td>The query or an array of queries. Each query should be either a Query builder object or a SQL string.</td></tr><tr><td><code>options?</code></td><td>{ <code>priority?</code>: <code>number</code>; }</td><td>An options object.</td></tr><tr><td><code>options.priority?</code></td><td><code>number</code></td><td>The query priority, defaults to <code>Priority.Normal</code>.</td></tr></tbody></table><h4 id="returns-6" tabindex="-1">Returns <a class="header-anchor" href="#returns-6" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>QueryResult</code></p><p>A query result promise.</p><hr><h3 id="query" tabindex="-1">query() <a class="header-anchor" href="#query" aria-label="Permalink to &quot;query()&quot;">​</a></h3><h4 id="call-signature-2" tabindex="-1">Call Signature <a class="header-anchor" href="#call-signature-2" aria-label="Permalink to &quot;Call Signature&quot;">​</a></h4><blockquote><p><strong>query</strong>(<code>query</code>, <code>options?</code>): <code>QueryResult</code>&lt;<code>Table</code>&lt;<code>TypeMap</code>&gt;&gt;</p></blockquote><p>Issue a query to the backing database. The submitted query may be consolidate with other queries and its results may be cached.</p><h5 id="parameters-6" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-6" aria-label="Permalink to &quot;Parameters&quot;">​</a></h5><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td><code>QueryType</code></td><td>The query as either a Query builder object or a SQL string.</td></tr><tr><td><code>options?</code></td><td>{[<code>key</code>: <code>string</code>]: <code>unknown</code>; <code>type?</code>: <code>&quot;arrow&quot;</code>; <code>cache?</code>: <code>boolean</code>; <code>persist?</code>: <code>boolean</code>; <code>priority?</code>: <code>number</code>; }</td><td>An options object.</td></tr><tr><td><code>options.type?</code></td><td><code>&quot;arrow&quot;</code></td><td>The query result format type.</td></tr><tr><td><code>options.cache?</code></td><td><code>boolean</code></td><td>If true, cache the query result client-side within the QueryManager.</td></tr><tr><td><code>options.persist?</code></td><td><code>boolean</code></td><td>If true, request the database server to persist a cached query server-side.</td></tr><tr><td><code>options.priority?</code></td><td><code>number</code></td><td>The query priority, defaults to <code>Priority.Normal</code>.</td></tr></tbody></table><h5 id="returns-7" tabindex="-1">Returns <a class="header-anchor" href="#returns-7" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>QueryResult</code>&lt;<code>Table</code>&lt;<code>TypeMap</code>&gt;&gt;</p><p>A query result promise.</p><h4 id="call-signature-3" tabindex="-1">Call Signature <a class="header-anchor" href="#call-signature-3" aria-label="Permalink to &quot;Call Signature&quot;">​</a></h4><blockquote><p><strong>query</strong>(<code>query</code>, <code>options?</code>): <code>QueryResult</code>&lt;<code>unknown</code>&gt;</p></blockquote><p>Issue a query to the backing database. The submitted query may be consolidate with other queries and its results may be cached.</p><h5 id="parameters-7" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-7" aria-label="Permalink to &quot;Parameters&quot;">​</a></h5><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td><code>QueryType</code></td><td>The query as either a Query builder object or a SQL string.</td></tr><tr><td><code>options?</code></td><td>{[<code>key</code>: <code>string</code>]: <code>unknown</code>; <code>type?</code>: <code>&quot;json&quot;</code>; <code>cache?</code>: <code>boolean</code>; <code>persist?</code>: <code>boolean</code>; <code>priority?</code>: <code>number</code>; }</td><td>An options object.</td></tr><tr><td><code>options.type?</code></td><td><code>&quot;json&quot;</code></td><td>The query result format type.</td></tr><tr><td><code>options.cache?</code></td><td><code>boolean</code></td><td>If true, cache the query result client-side within the QueryManager.</td></tr><tr><td><code>options.persist?</code></td><td><code>boolean</code></td><td>If true, request the database server to persist a cached query server-side.</td></tr><tr><td><code>options.priority?</code></td><td><code>number</code></td><td>The query priority, defaults to <code>Priority.Normal</code>.</td></tr></tbody></table><h5 id="returns-8" tabindex="-1">Returns <a class="header-anchor" href="#returns-8" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>QueryResult</code>&lt;<code>unknown</code>&gt;</p><p>A query result promise.</p><hr><h3 id="prefetch" tabindex="-1">prefetch() <a class="header-anchor" href="#prefetch" aria-label="Permalink to &quot;prefetch()&quot;">​</a></h3><h4 id="call-signature-4" tabindex="-1">Call Signature <a class="header-anchor" href="#call-signature-4" aria-label="Permalink to &quot;Call Signature&quot;">​</a></h4><blockquote><p><strong>prefetch</strong>(<code>query</code>, <code>options?</code>): <code>QueryResult</code>&lt;<code>Table</code>&lt;<code>TypeMap</code>&gt;&gt;</p></blockquote><p>Issue a query to prefetch data for later use. The query result is cached for efficient future access.</p><h5 id="parameters-8" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-8" aria-label="Permalink to &quot;Parameters&quot;">​</a></h5><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td><code>QueryType</code></td><td>The query as either a Query builder object or a SQL string.</td></tr><tr><td><code>options?</code></td><td>{[<code>key</code>: <code>string</code>]: <code>unknown</code>; <code>type?</code>: <code>&quot;arrow&quot;</code>; }</td><td>An options object.</td></tr><tr><td><code>options.type?</code></td><td><code>&quot;arrow&quot;</code></td><td>The query result format type.</td></tr></tbody></table><h5 id="returns-9" tabindex="-1">Returns <a class="header-anchor" href="#returns-9" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>QueryResult</code>&lt;<code>Table</code>&lt;<code>TypeMap</code>&gt;&gt;</p><p>A query result promise.</p><h4 id="call-signature-5" tabindex="-1">Call Signature <a class="header-anchor" href="#call-signature-5" aria-label="Permalink to &quot;Call Signature&quot;">​</a></h4><blockquote><p><strong>prefetch</strong>(<code>query</code>, <code>options?</code>): <code>QueryResult</code>&lt;<code>unknown</code>&gt;</p></blockquote><p>Issue a query to prefetch data for later use. The query result is cached for efficient future access.</p><h5 id="parameters-9" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-9" aria-label="Permalink to &quot;Parameters&quot;">​</a></h5><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>query</code></td><td><code>QueryType</code></td><td>The query as either a Query builder object or a SQL string.</td></tr><tr><td><code>options?</code></td><td>{[<code>key</code>: <code>string</code>]: <code>unknown</code>; <code>type?</code>: <code>&quot;json&quot;</code>; }</td><td>An options object.</td></tr><tr><td><code>options.type?</code></td><td><code>&quot;json&quot;</code></td><td>The query result format type.</td></tr></tbody></table><h5 id="returns-10" tabindex="-1">Returns <a class="header-anchor" href="#returns-10" aria-label="Permalink to &quot;Returns&quot;">​</a></h5><p><code>QueryResult</code>&lt;<code>unknown</code>&gt;</p><p>A query result promise.</p><hr><h3 id="updateclient" tabindex="-1">updateClient() <a class="header-anchor" href="#updateclient" aria-label="Permalink to &quot;updateClient()&quot;">​</a></h3><blockquote><p><strong>updateClient</strong>(<code>client</code>, <code>query</code>, <code>priority?</code>): <code>Promise</code>&lt;<code>unknown</code>&gt;</p></blockquote><p>Update client data by submitting the given query and returning the() data (or error) to the client.</p><h4 id="parameters-10" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-10" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>client</code></td><td><a href="./MosaicClient.html"><code>MosaicClient</code></a></td><td>A Mosaic client.</td></tr><tr><td><code>query</code></td><td><code>QueryType</code></td><td>The data query.</td></tr><tr><td><code>priority?</code></td><td><code>number</code></td><td>The query priority.</td></tr></tbody></table><h4 id="returns-11" tabindex="-1">Returns <a class="header-anchor" href="#returns-11" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>unknown</code>&gt;</p><p>A Promise that resolves upon completion of the update.</p><hr><h3 id="requestquery" tabindex="-1">requestQuery() <a class="header-anchor" href="#requestquery" aria-label="Permalink to &quot;requestQuery()&quot;">​</a></h3><blockquote><p><strong>requestQuery</strong>(<code>client</code>, <code>query?</code>): <code>Promise</code>&lt;<code>unknown</code>&gt;</p></blockquote><p>Issue a query request for a client. If the query is null or undefined, the client is simply updated. Otherwise <code>updateClient</code> is called. As a side effect, this method clears the current preaggregator state.</p><h4 id="parameters-11" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-11" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>client</code></td><td><a href="./MosaicClient.html"><code>MosaicClient</code></a></td><td>The client to update.</td></tr><tr><td><code>query?</code></td><td><code>QueryType</code> | <code>null</code></td><td>The query to issue.</td></tr></tbody></table><h4 id="returns-12" tabindex="-1">Returns <a class="header-anchor" href="#returns-12" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>Promise</code>&lt;<code>unknown</code>&gt;</p><hr><h3 id="connect" tabindex="-1">connect() <a class="header-anchor" href="#connect" aria-label="Permalink to &quot;connect()&quot;">​</a></h3><blockquote><p><strong>connect</strong>(<code>client</code>): <code>void</code></p></blockquote><p>Connect a client to the coordinator. Throws an error if the client is already connected.</p><h4 id="parameters-12" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-12" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>client</code></td><td><a href="./MosaicClient.html"><code>MosaicClient</code></a></td><td>The Mosaic client to connect.</td></tr></tbody></table><h4 id="returns-13" tabindex="-1">Returns <a class="header-anchor" href="#returns-13" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p><hr><h3 id="disconnect" tabindex="-1">disconnect() <a class="header-anchor" href="#disconnect" aria-label="Permalink to &quot;disconnect()&quot;">​</a></h3><blockquote><p><strong>disconnect</strong>(<code>client</code>): <code>void</code></p></blockquote><p>Disconnect a client from the coordinator. This method has no effect if the client is already disconnected.</p><h4 id="parameters-13" tabindex="-1">Parameters <a class="header-anchor" href="#parameters-13" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>client</code></td><td><a href="./MosaicClient.html"><code>MosaicClient</code></a></td><td>The Mosaic client to disconnect.</td></tr></tbody></table><h4 id="returns-14" tabindex="-1">Returns <a class="header-anchor" href="#returns-14" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><p><code>void</code></p>',131)])])}const b=t(d,[["render",c]]);export{p as __pageData,b as default};
