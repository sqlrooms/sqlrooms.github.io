import{_ as i,c as a,o as l,ag as e}from"./chunks/framework.Cycwnjj0.js";const E=JSON.parse('{"title":"@sqlrooms/ai-core","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://sqlrooms.org/api/ai-core/"}]]},"headers":[],"relativePath":"api/ai-core/index.md","filePath":"api/ai-core/index.md"}'),t={name:"api/ai-core/index.md"};function n(h,s,p,o,r,k){return l(),a("div",null,[...s[0]||(s[0]=[e(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /api/ai-core.md for this page in Markdown format</div><h1 id="sqlrooms-ai-core" tabindex="-1">@sqlrooms/ai-core <a class="header-anchor" href="#sqlrooms-ai-core" aria-label="Permalink to &quot;@sqlrooms/ai-core&quot;">​</a></h1><p>Core AI slice, chat UI primitives, and tool-streaming utilities for SQLRooms.</p><p>Use <code>@sqlrooms/ai-core</code> when you want lower-level control over AI state/transport/UI.<br> For most apps, use the higher-level <code>@sqlrooms/ai</code> package.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sqlrooms/ai-core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sqlrooms/room-store</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sqlrooms/ui</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zod</span></span></code></pre></div><p><code>@sqlrooms/ui</code> is a peer dependency used for Chat UI rendering/styling.<br> You typically import Chat components from <code>@sqlrooms/ai-core</code>, but <code>@sqlrooms/ui</code> must be installed for the visual components to work.</p><h2 id="store-setup-core-mode" tabindex="-1">Store setup (core mode) <a class="header-anchor" href="#store-setup-core-mode" aria-label="Permalink to &quot;Store setup (core mode)&quot;">​</a></h2><p><code>createAiSlice</code> requires:</p><ul><li><code>tools</code></li><li><code>getInstructions</code></li></ul><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {createAiSlice, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AiSliceState} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sqlrooms/ai-core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BaseRoomStoreState,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createBaseRoomSlice,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createRoomStore,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sqlrooms/room-store&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {z} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;zod&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> State</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseRoomStoreState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AiSliceState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">roomStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">useRoomStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createRoomStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">State</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createBaseRoomSlice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()(set, get, store),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createAiSlice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      getInstructions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;You are a helpful analytics assistant.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      tools: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        echo: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;echo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Echo text back&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          parameters: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({text: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()}),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            llmResult: {success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, details: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Echo: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })(set, get, store),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="chat-ui" tabindex="-1">Chat UI <a class="header-anchor" href="#chat-ui" aria-label="Permalink to &quot;Chat UI&quot;">​</a></h2><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {Chat} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sqlrooms/ai-core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AiPanel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat.Sessions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat.Messages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat.PromptSuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat.PromptSuggestions.Item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;What trends should I investigate first?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat.PromptSuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat.Composer</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Ask a question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Chat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="useful-exports" tabindex="-1">Useful exports <a class="header-anchor" href="#useful-exports" aria-label="Permalink to &quot;Useful exports&quot;">​</a></h2><ul><li>Slice/hooks: <code>createAiSlice</code>, <code>useStoreWithAi</code>, <code>AiSliceState</code></li><li>Chat UI: <code>Chat</code>, <code>ModelSelector</code>, <code>QueryControls</code>, <code>PromptSuggestions</code></li><li>Legacy/compat components: <code>AnalysisResultsContainer</code>, <code>AnalysisResult</code>, <code>ErrorMessage</code></li><li>Tool/agent utilities: <ul><li><code>convertToAiSDKTools</code></li><li><code>cleanupPendingAnalysisResults</code></li><li><code>fixIncompleteToolCalls</code></li><li><code>processAgentStream</code></li><li><code>updateAgentToolCallData</code></li></ul></li></ul><h2 id="related-packages" tabindex="-1">Related packages <a class="header-anchor" href="#related-packages" aria-label="Permalink to &quot;Related packages&quot;">​</a></h2><ul><li><code>@sqlrooms/ai</code> (recommended high-level integration)</li><li><code>@sqlrooms/ai-settings</code> (provider/model settings slice + UI)</li><li><code>@sqlrooms/ai-config</code> (config schemas and migrations)</li></ul><h2 id="classes" tabindex="-1">Classes <a class="header-anchor" href="#classes" aria-label="Permalink to &quot;Classes&quot;">​</a></h2><ul><li><a href="./classes/ToolAbortError.html">ToolAbortError</a></li></ul><h2 id="type-aliases" tabindex="-1">Type Aliases <a class="header-anchor" href="#type-aliases" aria-label="Permalink to &quot;Type Aliases&quot;">​</a></h2><ul><li><a href="./type-aliases/AiSliceConfig.html">AiSliceConfig</a></li><li><a href="./type-aliases/AiSliceState.html">AiSliceState</a></li><li><a href="./type-aliases/AgentStreamResult.html">AgentStreamResult</a></li><li><a href="./type-aliases/UIMessageChunk.html">UIMessageChunk</a></li><li><a href="./type-aliases/AgentToolCall.html">AgentToolCall</a></li><li><a href="./type-aliases/AgentToolCallAdditionalData.html">AgentToolCallAdditionalData</a></li><li><a href="./type-aliases/ErrorMessageComponentProps.html">ErrorMessageComponentProps</a></li><li><a href="./type-aliases/SessionType.html">SessionType</a></li><li><a href="./type-aliases/AddToolResult.html">AddToolResult</a></li></ul><h2 id="variables" tabindex="-1">Variables <a class="header-anchor" href="#variables" aria-label="Permalink to &quot;Variables&quot;">​</a></h2><ul><li><a href="./variables/AiSliceConfig.html">AiSliceConfig</a></li><li><a href="./variables/AiThinkingDots.html">AiThinkingDots</a></li><li><a href="./variables/AnalysisResult.html">AnalysisResult</a></li><li><a href="./variables/AnalysisResultsContainer.html">AnalysisResultsContainer</a></li><li><a href="./variables/Chat.html">Chat</a></li><li><a href="./variables/ModelSelector.html">ModelSelector</a></li><li><a href="./variables/PromptSuggestions.html">PromptSuggestions</a></li><li><a href="./variables/QueryControls.html">QueryControls</a></li><li><a href="./variables/ReasoningBox.html">ReasoningBox</a></li><li><a href="./variables/SessionControls.html">SessionControls</a></li><li><a href="./variables/ToolCallInfo.html">ToolCallInfo</a></li><li><a href="./variables/DeleteSessionDialog.html">DeleteSessionDialog</a></li><li><a href="./variables/SessionActions.html">SessionActions</a></li><li><a href="./variables/SessionDropdown.html">SessionDropdown</a></li><li><a href="./variables/SessionTitle.html">SessionTitle</a></li></ul><h2 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to &quot;Functions&quot;">​</a></h2><ul><li><a href="./functions/createDefaultAiConfig.html">createDefaultAiConfig</a></li><li><a href="./functions/createAiSlice.html">createAiSlice</a></li><li><a href="./functions/useStoreWithAi.html">useStoreWithAi</a></li><li><a href="./functions/updateAgentToolCallData.html">updateAgentToolCallData</a></li><li><a href="./functions/processAgentStream.html">processAgentStream</a></li><li><a href="./functions/createOnToolCompletedHandler.html">createOnToolCompletedHandler</a></li><li><a href="./functions/convertToAiSDKTools.html">convertToAiSDKTools</a></li><li><a href="./functions/ErrorMessage.html">ErrorMessage</a></li><li><a href="./functions/ToolErrorMessage.html">ToolErrorMessage</a></li><li><a href="./functions/useScrollToBottom.html">useScrollToBottom</a></li><li><a href="./functions/useSessionChat.html">useSessionChat</a></li><li><a href="./functions/extractModelsFromSettings.html">extractModelsFromSettings</a></li><li><a href="./functions/cleanupPendingAnalysisResults.html">cleanupPendingAnalysisResults</a></li><li><a href="./functions/fixIncompleteToolCalls.html">fixIncompleteToolCalls</a></li></ul>`,25)])])}const c=i(t,[["render",n]]);export{E as __pageData,c as default};
